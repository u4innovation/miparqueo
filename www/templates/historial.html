<ion-view view-title="Historial">
    <ion-nav-bar class="bar-stable">
      <ion-nav-buttons side="left">
        <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
        </button>
      </ion-nav-buttons>

      <ion-nav-buttons side="right">
        <button class="button button-icon button-clear ion-navicon ion-trash-a" ng-click="toggleEdit()" ng-if="historial.length > 0">
        </button>
      </ion-nav-buttons>
    </ion-nav-bar>
  <ion-content >
  <ion-refresher
    pulling-text="Actualizar historial..."
    on-refresh="getHistorial()">
  </ion-refresher>
  <button class="button button-block button-assertive" ng-click="eliminarReservas()" style="margin: 0;border-radius: 0;" ng-if="editMode">Eliminar Todos</button>
      <div class="card" ng-if="historial.length == 0">
  <div class="item item-text-wrap">
    No ha realizado ninguna reserva aun.
  </div>
</div>
      <div class="card" ng-repeat="r in historial">
        <div class="item item-text-wrap item-icon-right" ng-click="verReserva(r)">
          <p>{{r.Parqueo[0].Nombre}}</p>
          <p>Costo: {{r.Monto | currency}}</p>
          <p>Estadia: {{estadia(r)}}</p>
          <p>Placa: {{r.Placa}}  </p>
          <p>Puesto: {{r.puestoParqueo}}  </p>
          <i class="icon ion-chevron-right"></i>
        </div>
        <div class="item item-divider" style="padding:0;">
          <div class="button-bar">
              <button class="button button-light" ng-if="r.actions.ratings.avg == 0" ng-click="calificar(r)" style="margin: 0;border-radius: 0;">Calificar</button>
              <button class="button button-light" ng-if="r.actions.ratings.avg != 0" style="margin: 0;border-radius: 0;padding: 5px 0;"><span class="puntaje" style="padding: 5px;">{{r.actions.ratings.avg}}</span><i ng-repeat="i in getNumber(r.actions.ratings.avg) track by $index" class="rating ion-ios-star"></i></button>
              <button class="button button-balanced" ng-click="reservar(r)" style="margin: 0;border-radius: 0;">Reservar</button>
          </div>
        </div>
        <div class="item item-divider" style="padding:0;" ng-if="editMode">
          <div class="button-bar">
              <button class="button button-assertive" ng-click="eliminarReserva(r)" style="margin: 0;border-radius: 0;">Eliminar</button>
          </div>
        </div>
    </div>
  </ion-content>
</ion-view>
